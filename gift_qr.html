<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUKA KADO SPESIAL!</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/gift.css">
</head>
<body>
    <div class="gift-wrapper">
        <div class="gift-box" id="giftBox">
            <div class="gift-lid"></div>
            <div class="gift-body"></div>
            <div class="gift-bow-h"></div>
            <div class="gift-bow-v"></div>
            
            <div class="open-button" id="openGiftButton">
                <span>KLIK UNTUK MEMBUKA</span>
                <span class="pixel-arrow"></span>
            </div>
        </div>

        <div class="gift-content hidden" id="giftContent">
            <h2>PESAN RAHASIA TERUNGKAP!</h2>
            <img id="qrCodeImage" src="images/your_qrcode.png" alt="[DATA_HADIAH]">
            <p id="qrMessage">
                [INSTRUKSI]: PINDAI KODE INI UNTUK MENGAKSES PESAN TERENKRIPSI!
            </p>
            <button class="back-button" onclick="goBack()">KEMBALI KE TERMINAL</button>
        </div>
    </div>

    <script>
        const giftBox = document.getElementById('giftBox');
        const openGiftButton = document.getElementById('openGiftButton');
        const giftContent = document.getElementById('giftContent');
        const qrMessage = document.getElementById('qrMessage');

        openGiftButton.addEventListener('click', () => {
            // Sembunyikan tombol buka
            openGiftButton.style.display = 'none';

            // Tambahkan kelas untuk animasi membuka kado
            giftBox.classList.add('is-open');

            // Setelah animasi kado membuka selesai, tampilkan konten hadiah
            // Kita akan menunggu animasi tutup dan pita selesai
            const giftLid = document.querySelector('.gift-lid');
            const giftBowH = document.querySelector('.gift-bow-h');

            let animationsCompleted = 0;
            const totalAnimationsToWaitFor = 2; // lid dan bow

            const handleAnimationEnd = (event) => {
                if (event.target === giftLid || event.target === giftBowH) {
                    animationsCompleted++;
                    if (animationsCompleted === totalAnimationsToWaitFor) {
                        // Sembunyikan kotak hadiah setelah semua animasi opening selesai
                        giftBox.style.display = 'none'; 
                        giftContent.classList.remove('hidden'); // Tampilkan konten hadiah
                        giftContent.classList.add('content-reveal'); // Pemicu animasi muncul
                        
                        // Hapus event listener agar tidak terpicu lagi
                        giftLid.removeEventListener('animationend', handleAnimationEnd);
                        giftBowH.removeEventListener('animationend', handleAnimationEnd);
                    }
                }
            };

            giftLid.addEventListener('animationend', handleAnimationEnd);
            giftBowH.addEventListener('animationend', handleAnimationEnd);
        });

        function goBack() {
            // Ini akan kembali ke halaman sebelumnya di riwayat browser.
            // Jika halaman ini adalah halaman pertama yang dibuka, maka tidak akan terjadi apa-apa.
            // Untuk skenario game/aplikasi, mungkin perlu URL spesifik.
            window.history.back();
        }

        // TIPS: Cara mengubah QR Code dan pesan:
        // 1. Buat gambar QR code (PNG/JPG) dari text/link yang kamu inginkan.
        //    SARAN: Jaga QR Code tetap bersih, tambahkan pixel border di CSS.
        // 2. Ganti 'images/your_qrcode.png' dengan lokasi file QR code kamu.
        // 3. Ubah teks di dalam <p id="qrMessage"> sesuai keinginanmu.
        //    Contoh: "[INSTRUKSI]: HADIAH UTAMAMU ADALAH KESETIAAN!"
    </script>
</body>
</html>
